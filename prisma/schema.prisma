generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider          = "postgresql"
  url               = env("POSTGRES_PRISMA_URL")
  directUrl         = env("POSTGRES_URL_NON_POOLING")
  shadowDatabaseUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
  id        String   @id @default(uuid()) @db.Uuid
  username  String   @unique
  email     String   @unique
  password  String
  role      UserRole @default(USER)
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

model Vehiculo {
  vehiculoId         Int          @id @default(autoincrement())
  cliente            Cliente      @relation(fields: [clienteId], references: [clienteId])
  clienteId          Int
  tipoVehiculo       TipoVehiculo 
  marca              Marca             
  condicionIva       CondicionIva 
  patente            String       @unique @db.VarChar(7)
  observaciones      String?      @db.VarChar(255)
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
}

model Cliente {
  clienteId          Int          @id @default(autoincrement())
  tipoDeCliente      TipoDeCliente @default(INDIVIDUO)
  nombreCompleto     String       @db.VarChar(255)
  documento          Int?          
  email              String?      @unique @db.VarChar(255)
  condicionIva       CondicionIva @default(ConsumidorFinal)
  cuit               String?      @unique @db.VarChar(13)
  telefono           String       @db.VarChar(50)
  esCuentaCorriente  Boolean      @default(false)
  vehiculos          Vehiculo[]
  createdAt          DateTime     @default(now())
  updatedAt          DateTime     @updatedAt
}

enum CondicionIva {
  ConsumidorFinal
  Monotributista
  ResponsableInscripto
}
enum TipoDeCliente {
  INDIVIDUO
  EMPRESA
}
enum TipoVehiculo {
  SEDAN
  SUV
  MOTO
  FURGON
  CAMION
}

enum Marca {
  Agrale
  AlfaRomeo
  Audi
  Benelli
  BMW
  Chery
  Chevrolet
  Chrysler
  Citroen
  Daihatsu
  Deutz
  Dodge
  DS
  Fiat
  Ford
  Honda
  Hyundai
  Iveco
  Jac
  Jeep
  Kawasaki
  Kia
  LandRover
  MercedesBenz
  MiniCooper
  Mitsubishi
  Nissan
  Peugeot
  Ram
  Renault
  Seat
  Subaru
  Suzuki
  Toyota
  Volkswagen
  Volvo
}

enum UserRole {
  USER
  ADMIN
}